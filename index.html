<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IST to PST Converter</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <h1 class="my-4">IST to PST Converter</h1>
    <form>
      <div class="form-group">
        <label for="date">Date (dd/mm/yyyy)</label>
        <input type="text" class="form-control" id="date" placeholder="Enter date">
      </div>
      <div class="form-group">
        <label for="time">Time (HH:MM AM/PM)</label>
        <input type="text" class="form-control" id="time" placeholder="Enter time">
      </div>
      <button type="button" class="btn btn-primary" onclick="convertTime()">Convert</button>
    </form>

    <div class="mt-4">
      <h4>Converted Time (PST)</h4>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Date</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody id="outputTable">
        </tbody>
      </table>
      <button class="btn btn-secondary" onclick="copyOutput()">Copy Output</button>
    </div>
  </div>

  <script>
    function convertTime() {
      var dateInput = document.getElementById("date").value;
      var timeInput = document.getElementById("time").value;
      
      // Extracting date and time components
      var dateComponents = dateInput.split("/");
      var timeComponents = timeInput.split(" ");
      var timeParts = timeComponents[0].split(":");
      
      // Converting to numbers
      var day = parseInt(dateComponents[0]);
      var month = parseInt(dateComponents[1]) - 1; // Months are zero-based
      var year = parseInt(dateComponents[2]);
      var hours = parseInt(timeParts[0]);
      var minutes = parseInt(timeParts[1]);
      
      // Adjusting hours based on AM/PM
      if (timeComponents[1].toLowerCase() === "pm") {
        hours += 12;
      }
      
      // Creating IST date object
      var istDate = new Date(year, month, day, hours, minutes);
      
      // Converting to PST
      var pstDate = new Date(istDate.toLocaleString("en-US", { timeZone: "America/Los_Angeles" }));
      
      // Formatting PST date and time
      var pstDateString = (pstDate.getMonth() + 1) + "/" + pstDate.getDate() + "/" + pstDate.getFullYear();
      var pstTimeString = pstDate.toLocaleString("en-US", { hour: "numeric", minute: "numeric", hour12: true });
      
      // Displaying the converted time
      var outputTable = document.getElementById("outputTable");
      outputTable.innerHTML = "";
      
      var row = document.createElement("tr");
      var dateCell = document.createElement("td");
      var timeCell = document.createElement("td");
      
      dateCell.textContent = pstDateString;
      timeCell.textContent = pstTimeString;
      
      row.appendChild(dateCell);
      row.appendChild(timeCell);
      outputTable.appendChild(row);
    }
    
    function copyOutput() {
      var outputTable = document.getElementById("outputTable");
      var range = document.createRange();
      range.selectNode(outputTable);
      window.getSelection().addRange(range);
      
      try {
        var successful = document.execCommand("copy");
        var message = successful ? "Output copied!" : "Unable to copy output.";
        alert(message);
      } catch (err) {
        console.log("Copy failed:", err);
      }
      
      window.getSelection().removeAllRanges();
    }
  </script>
</body>

</html>
